\section{Method}

\subsection{Funnels}
\label{sec:funnels}

The uncertainty guarantees in this paper is given through the creation of
so-called \textit{funnels}. Funnels are the parameterization of the
\textit{finite time reachable sets} for the dynamical system at hand.

A \textit{funnel} is a parameterization of the reachable set of a dynamical
system. This means that a Funnel holds all the states the dynamical system can
be in during a planning task. Mathematically the reachable set of the system is
defined as
\[
  \vect{x}(0) \in \mathcal{X}_0 \implies \vect{x}(t) \in F(t), \forall t \in
  \sqb{0,T},
\]
where \(\mathcal{X}_0\) is the set of initial conditions, \(\sqb{0,T}\) the time
interval, and \(F(t)\) is the set of states that the system can be in at time
\(t\) \cite{majumdarFunnelLibrariesRealtime2017}. Although this paper concerns
itself with approximating the reachable set through \textit{Lyapunov} functions,
a useful analogy is imagining the funnel created through a \textit{Monte-Carlo}
simulation, where the funnel is the set of all the paths traversed by the
dynamical system at hand.

In the literature, the term funnel first appears in
\cite{masonMechanicsManipulation1985}, but is later employed in a lot of
research. The funnel definitions in this paper is taken from a series of
articles on funnels~\cite{Tobenkin_2011,tedrakeLQRtreesFeedbackMotion2009,
  majumdarRobustOnlineMotion2013,
  majumdarFunnelLibrariesRealtime2017,ahmadi2014dsos}, with the main focus being
on \cite{majumdarFunnelLibrariesRealtime2017}.


\subsection{Funnel Composition}

Once funnels have been generated as discrete motion primitives, it is time to
handle the overarching goal of creating a plan consisting of multiple funnels
chained from start to finish, so that safe traversal can be guaranteed along the
given planning trajectory. In order for two funnels to create one extended
motion primitive from multiple smaller primitives, the funnels in use must be
composable. In order for two funnels to be composable, the outlet of one funnel
needs to be completely contained within the inlet of the other. This means that
if \(\mathcal{F}_1 = F_1(T)\) is the outlet of funnel \(F_1\), and
\(\mathcal{F}_2 = F_2(0)\) is the inlet of \(F_2\), then
\begin{equation}
  \label{eq:funnel-subset}
  \mathcal{F}_1 \subseteq \mathcal{F}_2
\end{equation}
is required in order for the funnels to be composable.
\begin{definition}
  \label{def:funnel-composition}
  An ordered pair \((F_{1}, F_{2})\) of funnels \(F_1 \colon [0,T_1] \rightarrow
  \mathcal{P}(\R^n)\) and \(F_2 \colon [0,T_2] \rightarrow \mathcal{P}(\R^n)\)
  are sequentially composable if \(F_1(T) \subseteq F_2(0)\).
\end{definition}
Because the implication
\begin{equation}
  V_1(T_1,\bar{\vect{x}}) \leq \rho_1(T_1) \implies V_2(0,\bar{\vect{x}}) \leq
  \rho_2(0)
\end{equation}
is an equivalent condition to \cref{eq:funnel-subset}, and because it can be
checked through the following SOS program
\begin{IEEEeqnarray*}{lC}
  \text{Find } \; L(\bar{x}) \IEEEyesnumber \\
  \text{s.t.} \\
  \IEEEeqnarraymulticol{2}{l}{\rho_2(0) - V_2( 0,\bar{\vect{x}}) - L(\bar{\vect{x}})
                  \bigl( \rho_1(T_1) - V_1(T_1,\bar{\vect{x}}) \bigr) \quad \text{is SOS}} \mathEoS \nonumber
\end{IEEEeqnarray*}
Which means that funnel composition can be checked in the same way that the
funnels are generated -- through a SOS program. Also note that the above program
is a simple search for existence, and hence no cost function is needed.
